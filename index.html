<!DOCTYPE html>
<html>

  <head>
    <meta charset=utf-8 />
    <title>Interrail 2014</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

    <!-- stylesheets -->
    <link rel='stylesheet' href='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.css' />
    <link rel='stylesheet' href='css/bootstrap.min.css' />
    <link rel='stylesheet' href='css/popup_style.css' />
    <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Lobster&subset=latin,latin-ext,cyrillic'  type='text/css' />
    <link rel='stylesheet' href='css/main_style.css' />
  </head>

  <body>
    <div class='col12 pad4 contain fill-navy dark'>
      <div class='center quiet'>

        <!-- map + quotes -->
        <div id='map'></div>
        <div class="container" id='quotes'>
          <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

                <div class="post-preview" id="dominich_q">
                  <h2 class="post-title">
                    It was nice to meet you, we'll maybe meet again in Madrid! Prost!
                  </h2>
                  <p class="post-meta">
                    <span>Dominich</span> - Köln
                  </p>
                </div>
                <hr>

                <div class="post-preview" id="jiao_q">
                  <h2 class="post-title">
                      祝旅途
                  </h2>
                  <h3 class="post-subtitle">
                    Wish you all the best. Nice to meet you!
                  </h3>
                  <p class="post-meta">
                    <span>JiaoPan</span> &amp; <span>Hang Lim</span> - Eindhoven
                  </p>
                </div>
                <hr>

                <div class="post-preview" id="tale_q">
                  <h2 class="post-title">
                      CPEЌEH ЛAT
                  </h2>
                  <h3 class="post-subtitle">
                      Happy travelling
                  </h3>
                  <p class="post-meta">
                    <span>Tale</span> - Eindhoven
                </div>
                <hr>

                <div class="post-preview" id="erikos_q">
                  <h2 class="post-title">
                      Have a nice trip
                  </h2>
                  <p class="post-meta">
                    <span>Erikos</span> - Eindhoven
                </div>
                <hr>

                <div class="post-preview" id="nehq_q">
                  <h2 class="post-title">
                      Had a fun time with you guys. Keep in touch
                  </h2>
                  <h3 class="post-subtitle">
                      If you want to come to India do let me know!
                  </h3>
                  <p class="post-meta">
                    <span>Nehg</span> - Eindhoven
                </div>
                <hr>

                <div class="post-preview" id="nehq_q">
                  <h2 class="post-title">
                      Had a fun time with you guys. Keep in touch
                  </h2>
                  <h3 class="post-subtitle">
                      If you want to come to India do let me know!
                  </h3>
                  <p class="post-meta">
                    <span>Nehg</span> - Eindhoven
                </div>
                <hr>

                <div class="post-preview" id="miyuki_q">
                  <h2 class="post-title">
                      楽しかったです。漢字テストががんばって。
                  </h2>
                  <h3 class="post-subtitle">
                      It was nice to talk to you!
                  </h3>
                  <p class="post-meta">
                    <span>Miyuki</span> - Füssen
                </div>
                <hr>

                <div class="post-preview" id="carol_q">
                  <h2 class="post-title">
                      Tenham uma excelente viagem, venham me visitar no Brasil
                  </h2>
                  <p class="post-meta">
                    <span>Carolina</span> - München
                  </p>
                </div>
                <hr>

                <div class="post-preview" id="cynthia_q">
                  <h2 class="post-title">
                      Marina y Manu fue un placer conocerlos, la próxima vez cuando vuelvan nos escriben
                  </h2>
                  <p class="post-meta">
                    <span>Cynthia</span> - München
                  </p>
                </div>
                <hr>

                <div class="post-preview" id="tingo_q">
                  <h2 class="post-title">
                      Esperamos por vocês em Portugal, salut! ;)
                  </h2>
                  <p class="post-meta">
                    <span>Tingo</span> - Salzburg
                  </p>
                </div>
                <hr>

                <div class="post-preview" id="marta_q">
                  <h2 class="post-title">
                      Vengham visitar OPorto! Bom citio, boa comida, e lindos paisajen com boa gente :)
                  </h2>
                  <p class="post-meta">
                    <span>Marta</span> - Salzburg
                  </p>
                </div>
                <hr>

            </div>
          </div>
        </div>

      </div>

      <div class='col4 pad2 fill-darken1 pin-left' id='cms_bar'>
        <div class="container-fluid" >
          <ul class="nav navbar-nav">
            <li class="active">
              <button type="button" class="btn btn-link" onclick="hideQuotes()">
                <span class="glyphicon glyphicon-map-marker"></span>
              </button>
            </li>
            <li>
              <button type="button" class="btn btn-link" onclick="showQuotes()">
                <span class="glyphicon glyphicon-heart-empty"></span>
              </button>
            </li>
          </ul>
        </div>
      </div>

    </div>

    <!-- js -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.js'></script>
    <script type="text/javascript" src="access-token.js"></script>
    <script type="text/javascript" src="js/geo.js"></script>
    <script type="text/javascript" src="js/aux.js"></script>
    <script type="text/javascript" src="js/menu_mouse_over.js"></script>

    <script>
      L.mapbox.accessToken = token;
      opt = {zoomControl: false};
      var map = L.mapbox.map('map', 'manutero.jjgomcin', opt);
      disableZoomHandlers(map);
      var myLayer = L.mapbox.featureLayer().addTo(map);

      // center on marker
      myLayer.on('click', function(e) {
          goo = clone(e.layer.getLatLng());
          goo["lat"] += 3;
          map.panTo(goo);
      });

      // // change color
      // myLayer.on('click', function(e) {
      //     resetColors();
      //     e.layer.feature.properties['old-color'] = e.layer.feature.properties['marker-color'];
      //     e.layer.feature.properties['marker-color'] = '#ff8888';
      //     myLayer.setGeoJSON(geoJson);
      // });

      // Add custom popup html to each marker.
      function addImages(e) {
          var marker = e.layer;
          var feature = marker.feature;
          var images = feature.properties.images
          var slideshowContent = '';

          for(var i = 0; i < images.length; i++) {
              var img = images[i];

              slideshowContent += '<div class="image' + (i === 0 ? ' active' : '') + '">' +
                                    '<img src="' + img[0] + '" />' +
                                    '<div class="caption">' + img[1] + '</div>' +
                                  '</div>';
          }

          // Create custom popup content
          var popupContent =  '<div id="' + feature.properties.id + '" class="popup">' +
                                  '<h2>' + feature.properties.title + '</h2>' +
                                  '<div class="slideshow">' +
                                      slideshowContent +
                                  '</div>' +
                                  '<div class="cycle">' +
                                      '<a href="#" class="prev">&laquo; Previous</a>' +
                                      '<a href="#" class="next">Next &raquo;</a>' +
                                  '</div>'
                              '</div>';

          // http://leafletjs.com/reference.html#popup
          marker.bindPopup(popupContent,{
              closeButton: false,
              minWidth: 320
          });

      }
      myLayer.on('layeradd', addImages);


      // Add features to the map
      myLayer.setGeoJSON(geoJson);


      $('#map').on('click', '.popup .cycle a', function() {
          var $slideshow = $('.slideshow'),
              $newSlide;

          if ($(this).hasClass('prev')) {
              $newSlide = $slideshow.find('.active').prev();
              if ($newSlide.index() < 0) {
                  $newSlide = $('.image').last();
              }
          } else {
              $newSlide = $slideshow.find('.active').next();
              if ($newSlide.index() < 0) {
                  $newSlide = $('.image').first();
              }
          }

          $slideshow.find('.active').removeClass('active').hide();
          $newSlide.addClass('active').show();
          return false;
      });

    </script>


  </body>
</html>
